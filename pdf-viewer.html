<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PDF 文档展示 - 我的个人博客</title>
<link rel="stylesheet" href="styles.css">
<style>
    .pdf-container {
        width: 100%;
        height: 800px;
        border: none;
    }
</style>
</head>
<body>
<header class="site-header">
<div class="container header-inner">
<div class="logo">我的博客</div>
<nav class="nav">
<a href="index.html" class="nav-link">首页</a>
<a href="posts.html" class="nav-link">文章</a>
<a href="about.html" class="nav-link">关于</a>
</nav>
</div>
</header>
<main class="site-main">
<section class="section">
<div class="container">
<article class="post-detail">
<h1 class="post-title" id="pdf-title">PDF 文档展示</h1>
<div class="post-meta" id="pdf-file-name"></div>
<div class="post-content" id="pdf-wrapper">
    <!-- PDF will be embedded here -->
</div>
</article>
<a href="posts.html" class="button secondary">返回文章列表</a>
</div>
</section>
</main>
<footer class="site-footer">
<div class="container footer-inner">
<span>© <span id="year"></span> 我的个人博客</span>
<span>Powered by GitHub Pages</span>
</div>
</footer>
<script>
document.getElementById("year").textContent = new Date().getFullYear();

function getPdfFileFromQuery() {
  var params = new URLSearchParams(window.location.search);
  return params.get("file");
}

function showMessage(message) {
  var container = document.getElementById("pdf-wrapper");
  container.innerHTML = `<p>${message}</p>`;
}

function initPdfViewer() {
  var file = getPdfFileFromQuery();
  var nameEl = document.getElementById("pdf-file-name");
  var titleEl = document.getElementById("pdf-title");
  
  if (!file) {
    nameEl.textContent = "未指定文件";
    showMessage("请在链接后添加 ?file=posts/文件名.pdf 来指定要展示的 PDF 文件。");
    return;
  }

  // Decode file name for display
  try {
      var decodedName = decodeURIComponent(file);
      // Extract filename from path
      var filename = decodedName.split('/').pop();
      titleEl.textContent = filename;
      nameEl.textContent = "文件路径: " + decodedName;
  } catch (e) {
      nameEl.textContent = file;
  }

  var container = document.getElementById("pdf-wrapper");
  
  // Create object/embed tag
  // Using object with fallback
  var object = document.createElement('object');
  object.data = file;
  object.type = "application/pdf";
  object.className = "pdf-container";
  
  var fallback = document.createElement('p');
  fallback.innerHTML = `您的浏览器不支持直接嵌入 PDF。<a href="${file}" target="_blank">点击此处下载或预览 PDF 文件</a>。`;
  
  object.appendChild(fallback);
  
  container.innerHTML = '';
  container.appendChild(object);
}

initPdfViewer();
</script>
</body>
</html>
